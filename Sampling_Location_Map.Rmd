---
title: "FASTR Sampling location map"
author: "Dave Bosworth and Nicole Kwan"
date: "6/21/2021"
output: 
  html_document: 
    code_folding: hide
    toc: true
    toc_float:
      collapsed: false
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Purpose


# Global code and functions

```{r load packages, message = FALSE, warning = FALSE}
# Load packages
library(tidyverse)
library(sf)
library(leaflet)
```


# Import and Prepare Data

```{r import data, message = FALSE}
fish_samp_loc <- read_csv("Stations_Fish_NDFA_2021-01-13.csv")
```

```{r convert df to sf}
fish_samp_loc_sf <- fish_samp_loc %>% 
  select(-geometry) %>% 
  st_as_sf(
    coords = c("Longitude", "Latitude"),
    crs = 4326,
    remove = FALSE
  )
```

```{r create leaflet map}
# Define color palette for Surveys
color_pal <- colorFactor(palette = "plasma", domain = fish_samp_loc_sf$Survey.x)

leaflet(fish_samp_loc_sf) %>% 
  addTiles() %>% 
  addCircleMarkers(
    radius = 3,
    fillColor = ~color_pal(Survey.x),
    fillOpacity = 1,
    weight = 0.5,
    color = "black",
    opacity = 1,
    label = paste0(
      "Station: ",
      fish_samp_loc_sf$StationCode,
      ", Survey: ",
      fish_samp_loc_sf$Survey.x
    )
  ) %>% 
  addLegend(
    position = "bottomleft",
    pal = color_pal,
    values = ~Survey.x,
    title = "FASTR Fish Surveys"
  )
```

